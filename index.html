<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REBEL STATE - HAPPY HOLIDAYS ACCESS POINT</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SweetAlert2 untuk notifikasi dan prompt kata sandi -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;900&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /* --- TEMA NATAL DAN TAHUN BARU --- */
        :root {
            --christmas-red: #E53935; /* Merah Natal */
            --christmas-green: #4CAF50; /* Hijau Natal */
            --christmas-gold: #FFD700; /* Emas Aksen */
            --bg-dark: #0f2027; /* Latar Belakang Gelap */
        }
        
        /* Konfigurasi Dasar dan Font */
        body {
            font-family: 'Poppins', sans-serif;
            /* Latar Belakang Natal: Gradasi Biru Tua ke Hijau Gelap */
            background: linear-gradient(135deg, var(--bg-dark) 0%, #2c5364 50%, #0f2027 100%);
            color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Mencegah scroll */
        }

        /* Container Splash dengan sentuhan Natal */
        .splash-container {
            position: relative;
            background: rgba(15, 32, 39, 0.85); /* Semi-transparan agar salju terlihat */
            backdrop-filter: blur(5px);
            padding: 40px;
            text-align: center;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            z-index: 10;
            /* Border dan shadow Natal */
            border: 3px solid var(--christmas-red);
            box-shadow: 0 0 40px rgba(76, 175, 80, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .title-text {
            font-size: 3.5rem;
            font-weight: 900;
            color: #fff;
            margin-bottom: 20px;
            text-transform: uppercase;
            /* Efek Text Shadow Natal (Merah & Hijau) */
            text-shadow: 3px 3px 0px var(--christmas-red), -2px -2px 0px var(--christmas-green);
            font-style: italic;
        }

        /* CTA Button Styling Natal */
        .cta-button {
            display: inline-block;
            background: var(--christmas-red);
            color: #fff;
            padding: 15px 50px;
            border: 2px solid var(--christmas-gold);
            border-radius: 5px; /* Sedikit lengkungan agar lebih lembut */
            font-size: 1.25rem;
            font-weight: 800;
            text-transform: uppercase;
            text-decoration: none;
            margin-top: 30px;
            transition: all 0.3s;
            box-shadow: 0 0 20px var(--christmas-red);
            letter-spacing: 2px;
            cursor: pointer;
            width: 100%;
            max-width: 300px;
        }
        .cta-button:hover:not(:disabled) {
            background-color: var(--christmas-green);
            color: var(--christmas-gold);
            box-shadow: 0 0 40px var(--christmas-green);
            transform: translateY(-5px) scale(1.02);
            border-color: #fff;
        }

        .cta-button:disabled {
            cursor: not-allowed;
            opacity: 0.4;
            box-shadow: none;
        }
        
        /* Responsive Title */
        @media (max-width: 600px) {
            .title-text {
                font-size: 2.5rem;
            }
            .cta-button {
                font-size: 1rem;
                padding: 12px 30px;
            }
        }

        /* --- EFEK SALJU --- */
        .snowflake {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #fff;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.8;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
            z-index: 5;
            /* Animasi akan diset di JavaScript */
        }
        
        /* Animasi jatuh salju dasar */
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
    </style>
</head>
<body>
    <!-- Layer Salju -->
    <div id="snow-container" class="fixed inset-0 overflow-hidden pointer-events-none"></div>

    <div class="splash-container" data-aos="zoom-in" data-aos-duration="1000">
        
        <div class="w-24 h-24 mx-auto mb-6">
            <!-- LOGO Placeholder yang disesuaikan dengan border Natal -->
            <img src="web rebel/image.png"
                onerror="this.onerror=null; this.src='https://placehold.co/100x100/E53935/ffffff?text=HOLIDAY';"
                alt="Rebel Logo"
                class="w-full h-full rounded-full border-4 border-[var(--christmas-gold)] object-cover shadow-[0_0_20px_var(--christmas-red)]">
        </div>
        
        <h1 class="title-text">
            REBEL STATE
        </h1>
        <p class="text-xl text-[var(--christmas-gold)] tracking-wider font-mono" data-aos="fade-up" data-aos-delay="200">
            [ HAPPY HOLIDAYS ACCESS GATEWAY ]
        </p>

        <!-- SATU-SATUNYA TOMBOL -->
        <button 
            id="enter-button" 
            class="cta-button" 
            data-aos="fade-up" 
            data-aos-delay="500"
            onclick="enterSite()">
            ENTER CITY
        </button>

        <p id="status-message" class="mt-8 text-sm text-gray-300 font-mono transition-colors duration-300">
            Christmas Lights On. Click to Proceed.
        </p>
    </div>
    
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        // --- EFEK SALJU JATUH (Diaktifkan di JavaScript) ---
        const snowContainer = document.getElementById('snow-container');
        const NUM_SNOWFLAKES = 50;

        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            
            // Posisi X acak
            const startX = Math.random() * 100; 
            // Ukuran acak (5px hingga 15px)
            const size = Math.random() * 10 + 5; 
            // Durasi jatuh acak (10s hingga 20s)
            const duration = Math.random() * 10 + 10; 
            // Delay acak agar salju tidak jatuh bersamaan
            const delay = Math.random() * 5; 

            snowflake.style.left = `${startX}vw`;
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.animation = `fall ${duration}s linear infinite`;
            snowflake.style.animationDelay = `${delay}s`;
            
            snowContainer.appendChild(snowflake);

            // Bersihkan salju yang sudah jatuh agar tidak memenuhi DOM
            snowflake.addEventListener('animationiteration', () => {
                const newX = Math.random() * 100;
                snowflake.style.left = `${newX}vw`;
                // Atur ulang posisi agar salju seolah-olah baru muncul di atas
                snowflake.style.transform = 'translateY(0)'; 
            });
        }

        // Buat semua kepingan salju
        for (let i = 0; i < NUM_SNOWFLAKES; i++) {
            createSnowflake();
        }
        // --- AKHIR EFEK SALJU JATUH ---


        // --- KONFIGURASI KEAMANAN (Disesuaikan sedikit agar sesuai tema) ---
        const ACCESS_PASSWORD = 'rebelcity';
        const MAX_ATTEMPTS = 5;
        // Gunakan localStorage untuk melacak upaya login yang gagal agar persist di browser
        const ATTEMPT_KEY = 'rebelStateLoginAttempts';

        // Ambil jumlah upaya yang gagal (default 0)
        let loginAttempts = parseInt(localStorage.getItem(ATTEMPT_KEY) || '0', 10);
        
        const enterButton = document.getElementById('enter-button');
        const statusMessage = document.getElementById('status-message');

        /**
         * Fungsi untuk mengarahkan pengguna ke halaman utama.
         */
        function proceedToSite() {
            localStorage.removeItem(ATTEMPT_KEY); // Reset attempts on success
            Swal.fire({
                title: 'HOLIDAY ACCESS GRANTED',
                text: 'Mengarahkan ke Kota Rebel State dengan semangat Tahun Baru...',
                icon: 'success',
                background: '#1a1a1a',
                color: '#fff',
                timer: 1500, 
                timerProgressBar: true,
                showConfirmButton: false,
                customClass: {
                    popup: 'border-2 border-[var(--christmas-green)] shadow-lg shadow-[var(--christmas-green)]',
                    title: 'text-[var(--christmas-gold)]'
                },
                didOpen: () => {
                    // Setelah notif muncul sebentar, langsung redirect
                    setTimeout(() => {
                        // Tetap menggunakan URL yang sama
                        window.location.href = "web rebel/pertama.html";
                    }, 500);
                }
            });
        }

        /**
         * Fungsi untuk menampilkan prompt kata sandi.
         */
        function promptForPassword() {
            if (loginAttempts >= MAX_ATTEMPTS) {
                // Jangan tampilkan prompt, langsung handle failed attempt
                handleFailedAttempt(); 
                return;
            }

            Swal.fire({
                title: 'SECRET SANTA AUTHENTICATION',
                html: `<p class="text-sm mt-2 text-gray-400">Restricted access period (00:00 - 09:00).<br>Enter the Holiday Code.</p>`,
                input: 'password',
                inputPlaceholder: 'Enter Rebel City Holiday Code',
                showCancelButton: true,
                confirmButtonText: 'Submit',
                cancelButtonText: 'Cancel',
                background: '#1a1a1a',
                color: '#fff',
                inputAttributes: {
                    autocapitalize: 'off',
                    autocorrect: 'off'
                },
                customClass: {
                    popup: 'border-2 border-[var(--christmas-red)] shadow-lg shadow-[var(--christmas-red)]',
                    input: 'bg-gray-800 text-[var(--christmas-green)] border-gray-700 focus:border-[var(--christmas-green)]'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const inputPassword = result.value;
                    if (inputPassword === ACCESS_PASSWORD) {
                        loginAttempts = 0; // Reset attempts
                        localStorage.removeItem(ATTEMPT_KEY);
                        proceedToSite();
                    } else {
                        loginAttempts++;
                        localStorage.setItem(ATTEMPT_KEY, loginAttempts.toString());
                        handleFailedAttempt();
                    }
                }
            });
        }

        /**
         * Menangani percobaan kata sandi yang gagal.
         */
        function handleFailedAttempt() {
            if (loginAttempts >= MAX_ATTEMPTS) {
                // KICK OUT / LOCK DOWN
                enterButton.textContent = "ACCESS LOCKED: MERRY CHRISTMAS!";
                enterButton.disabled = true;
                enterButton.classList.add('opacity-50', 'cursor-not-allowed', 'bg-red-900', 'text-red-400', 'border-red-400');
                enterButton.classList.remove('bg-[var(--christmas-red)]', 'border-[var(--christmas-gold)]');
                
                statusMessage.textContent = 'ACCESS DENIED: Maximum failed attempts reached. System locked.';
                statusMessage.classList.add('text-red-400');
                statusMessage.classList.remove('text-gray-300');


                Swal.fire({
                    title: 'ACCESS DENIED: GRINCH MODE',
                    text: 'Maximum failed attempts reached. System access locked. Have a cold winter.',
                    icon: 'error',
                    confirmButtonText: 'Acknowledge',
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    background: '#1a1a1a',
                    color: '#fff',
                    customClass: {
                        popup: 'border-2 border-red-500 shadow-lg shadow-red-900',
                        title: 'text-red-400'
                    }
                });
            } else {
                // Notifikasi percobaan gagal
                const remaining = MAX_ATTEMPTS - loginAttempts;
                statusMessage.textContent = `WARNING: Incorrect Holiday Code. ${remaining} attempts remaining.`;
                statusMessage.classList.remove('text-gray-300');
                statusMessage.classList.add('text-yellow-400');

                Swal.fire({
                    title: 'INCORRECT CODE',
                    text: `Attempt failed. You have ${remaining} attempts remaining.`,
                    icon: 'warning',
                    timer: 2000,
                    showConfirmButton: false,
                    background: '#1a1a1a',
                    color: '#fff',
                    customClass: {
                        popup: 'border-2 border-yellow-500 shadow-lg shadow-yellow-900',
                        title: 'text-yellow-400'
                    }
                });
            }
        }

        /**
         * Fungsi utama yang dipanggil saat tombol diklik.
         * Bertanggung jawab untuk mengecek waktu dan mengalihkan ke mode otentikasi jika perlu.
         */
        window.enterSite = function() {
            const now = new Date();
            const currentHour = now.getHours(); // 0 (12 AM) sampai 23 (11 PM)

            // Periode terlarang: Jam 0 (12 AM) sampai Jam 8 (08:59:59). Jam 9 (09:00:00) sudah diizinkan.
            const isRestricted = currentHour >= 0 && currentHour <= 8;

            // Selalu cek apakah sudah terkunci dari percobaan sebelumnya
            if (loginAttempts >= MAX_ATTEMPTS) {
                 handleFailedAttempt(); // Ini akan menampilkan pesan lockout dan memastikan tombol tetap dinonaktifkan
                 return;
            }

            if (isRestricted) {
                promptForPassword();
            } else {
                // Waktu terbuka (9 AM - 11:59 PM)
                proceedToSite();
            }
        }

        // Jalankan sekali saat halaman dimuat untuk menampilkan status awal jika sudah terkunci
        document.addEventListener('DOMContentLoaded', () => {
            if (loginAttempts >= MAX_ATTEMPTS) {
                handleFailedAttempt();
            }
        });
    </script>
</body>
</html>